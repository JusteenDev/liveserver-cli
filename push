#!/data/data/com.termux/files/usr/bin/bash

# Ensure the user is in the git repository
if [ ! -d .git ]; then
  echo "This is not a git repository."
  exit 1
fi

# Check if there are any changes
git status --porcelain | grep -q . || { echo "No changes to commit."; exit 0; }

# Ask the user for the repository URL (including personal access token)
echo "Enter the repository URL (format: https://username:token@github.com/username/repo-name.git):"
read REMOTE_URL

# Commit message (automated)
commit_message="Auto commit - $(date)"

# Stage all changes
git add .

# Commit the changes
git commit -m "$commit_message"

# Set the remote URL with user input for authentication
git remote set-url origin $REMOTE_URL

# Push the changes to the remote repository
git push origin main

echo "Changes committed and pushed successfully."
